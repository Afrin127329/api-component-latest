{"version":3,"file":"index.js","mappings":"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","sources":["webpack://api-component/webpack/universalModuleDefinition","webpack://api-component/webpack/bootstrap","webpack://api-component/webpack/runtime/define property getters","webpack://api-component/webpack/runtime/hasOwnProperty shorthand","webpack://api-component/webpack/runtime/make namespace object","webpack://api-component/./src/components.ts","webpack://api-component/./src/panels.ts","webpack://api-component/./src/index.ts","webpack://api-component/./src/blocks.ts","webpack://api-component/./src/traits.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"api-component\"] = factory();\n\telse\n\t\troot[\"api-component\"] = factory();\n})(typeof globalThis !== 'undefined' ? globalThis : (typeof window !== 'undefined' ? window : this), () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { Editor } from \"grapesjs\";\r\nimport { RequiredPluginOptions } from \".\";\r\n\r\nexport const typeForm = \"form\";\r\nexport const typeInput = \"input\";\r\nexport const typeButton = \"button\";\r\nexport const typeLabel = \"label\";\r\nexport const typeText = \"text\";\r\nexport const typeDesc = \"desc\";\r\nexport const typeDiv = \"div\";\r\nexport const typeHiddenDiv = \"hiddenDiv\";\r\n\r\nexport default (editor: Editor, opts: RequiredPluginOptions) => {\r\n  const { Components, TraitManager } = editor;\r\n  const { label } = opts;\r\n  let productData: any;\r\n  const productPrefix = opts.classPrefix;\r\n  const idContainer = `${typeForm}-container`;\r\n\r\n  const nameTrait = {\r\n    name: \"name\",\r\n  };\r\n\r\n  const placeholderTrait = {\r\n    name: \"placeholder\",\r\n  };\r\n\r\n  const requiredTrait = {\r\n    type: \"checkbox\",\r\n    name: \"required\",\r\n  };\r\n\r\n  const checkIfInPreview = (ev: Event) => {\r\n    if (!editor.Commands.isActive(\"preview\")) {\r\n      ev.preventDefault();\r\n    }\r\n  };\r\n\r\n  Components.addType(typeForm, {\r\n    view: {\r\n      onRender() {\r\n        productData = this.model.attributes.selectedData;\r\n\r\n        let token: any = Components.getById(\"token\").view;\r\n        token.el.value = document.head.querySelector('meta[name=\"csrf-token\"]');\r\n      },\r\n      events: {\r\n        submit: (e: Event) => e.preventDefault(),\r\n      } as any,\r\n    },\r\n    model: {\r\n      defaults: {\r\n        tagName: \"form\",\r\n        droppable: \":not(form)\",\r\n        draggable: \":not(form)\",\r\n        name: label,\r\n        attributes: {\r\n          class: `${productPrefix} ${productPrefix}-container`,\r\n          method: \"post\",\r\n          action: \"https://chepapest.com/checkout\",\r\n        },\r\n        traits: [\r\n          {\r\n            type: \"select\",\r\n            name: \"product\",\r\n          },\r\n        ],\r\n        components: { type: idContainer, data: productData },\r\n        styles: `\r\n          .${productPrefix} {\r\n            max-width: 50rem;\r\n            padding: 20px;\r\n            border-radius: 10px;\r\n            box-shadow: rgb(223 223 223) 0px 6px 20px 7px;\r\n            margin: 1rem;\r\n            outline: none !important;\r\n            border: 2px solid #d9d9d9;\r\n\r\n          }\r\n\r\n          .${productPrefix}-container {\r\n            width: 100%;\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: center;\r\n            gap: 2rem;\r\n            margin-bottom: 2rem;\r\n            padding: 3rem;\r\n          }\r\n\r\n          @media only screen and (max-width: 600px) {\r\n            .${productPrefix}{\r\n              width: 90%;\r\n  \r\n            }\r\n          }\r\n        `,\r\n      },\r\n\r\n      init() {\r\n        this.on(\"change:attributes:selectedData\", () => {\r\n          // Take Selected Data object from the traits\r\n          const data = this.getAttributes().selectedData;\r\n\r\n          // Grab the DOM Elements\r\n          const idElem: any = Components.getById(\"productId\").view;\r\n          const priceElem: any = Components.getById(\"productPrice\").view;\r\n          const quantityElem: any = Components.getById(\"productQuantity\").view;\r\n\r\n          idElem.el.innerHTML = data.id;\r\n          priceElem.el.innerHTML = data.price;\r\n          quantityElem.el.innerHTML = 1;\r\n        });\r\n      },\r\n    },\r\n  });\r\n\r\n  // For Product Title\r\n  Components.addType(typeText, {\r\n    isComponent: (el) => el.tagName == \"P\",\r\n    model: {\r\n      defaults: {\r\n        tagName: \"p\",\r\n        droppable: false,\r\n        highlightable: false,\r\n        attributes: { class: `${productPrefix}-idTitle` },\r\n        styles:\r\n          opts.style ||\r\n          `\r\n          .${productPrefix}-idTitle {\r\n            font-size: 2.5rem;\r\n            font-weight: 900;\r\n            margin-bottom: 0rem;\r\n            text-align: center;\r\n            width: 100%;\r\n          } \r\n          `,\r\n      },\r\n    },\r\n  });\r\n  // For Input  Label\r\n  Components.addType(typeLabel, {\r\n    isComponent: (el) => el.tagName == \"LABEL\",\r\n    model: {\r\n      defaults: {\r\n        tagName: \"label\",\r\n        droppable: false,\r\n        highlightable: false,\r\n        attributes: { class: `${productPrefix}-idLabel` },\r\n        styles:\r\n          opts.style ||\r\n          `\r\n          .${productPrefix}-idLabel {\r\n            \r\n          } \r\n          `,\r\n      },\r\n    },\r\n  });\r\n\r\n  // For input div\r\n  Components.addType(typeDiv, {\r\n    isComponent: (el) => el.tagName == \"DIV\",\r\n    model: {\r\n      defaults: {\r\n        tagName: \"div\",\r\n        droppable: false,\r\n        highlightable: false,\r\n        attributes: { class: `${productPrefix}-inputDiv` },\r\n        styles:\r\n          opts.style ||\r\n          `\r\n          .${productPrefix}-inputDiv {\r\n            display: flex;\r\n            gap: 2 rem;\r\n            gap: 2rem;\r\n            justify-content: space-between;\r\n            font-size: 1.4rem;\r\n            align-items: center;\r\n            width: 23rem;\r\n          }\r\n\r\n          \r\n          \r\n          @media only screen and (max-width: 600px) {\r\n            .${productPrefix}-inputDiv{\r\n              width: 100%;\r\n              font-size: 1rem;\r\n              flex-direction: column;\r\n              gap: 0.5rem;\r\n  \r\n            }\r\n          }\r\n          `,\r\n      },\r\n    },\r\n  });\r\n\r\n  // For hidden input div\r\n  Components.addType(typeHiddenDiv, {\r\n    isComponent: (el) => el.tagName == \"DIV\",\r\n    model: {\r\n      defaults: {\r\n        tagName: \"div\",\r\n        droppable: false,\r\n        highlightable: false,\r\n        attributes: { class: `${productPrefix}-hiddenInput` },\r\n        styles:\r\n          opts.style ||\r\n          `\r\n          .${productPrefix}-hiddenInput {\r\n            display: none;\r\n          }\r\n          `,\r\n      },\r\n    },\r\n  });\r\n\r\n  // Input Elements\r\n  Components.addType(typeInput, {\r\n    isComponent: (el) => el.tagName == \"INPUT\",\r\n    model: {\r\n      defaults: {\r\n        tagName: \"input\",\r\n        droppable: false,\r\n        highlightable: false,\r\n        attributes: { type: \"text\", class: `${productPrefix}-inputField` },\r\n        traits: [\r\n          nameTrait,\r\n          placeholderTrait,\r\n          {\r\n            type: \"select\",\r\n            name: \"type\",\r\n            options: [{ value: \"text\" }],\r\n          },\r\n          requiredTrait,\r\n        ],\r\n        styles:\r\n          opts.style ||\r\n          `\r\n          .${productPrefix}-inputField {\r\n            border: 2px solid #10101033;\r\n            padding: 0.5rem;\r\n            outline: none;\r\n            border-radius: 10px;\r\n          } \r\n          `,\r\n      },\r\n    },\r\n\r\n    extendFnView: [\"updateAttributes\"],\r\n    view: {\r\n      updateAttributes() {\r\n        this.el.setAttribute(\"autocomplete\", \"off\");\r\n      },\r\n    },\r\n  });\r\n\r\n  Components.addType(typeButton, {\r\n    extend: typeInput,\r\n    isComponent: (el) => el.tagName == \"BUTTON\",\r\n    model: {\r\n      defaults: {\r\n        tagName: \"button\",\r\n        attributes: {\r\n          type: \"submit\",\r\n          value: \"submit\",\r\n          class: `${productPrefix}-inputBtn`,\r\n        },\r\n        text: \"Submit Now\",\r\n        styles:\r\n          opts.style ||\r\n          `\r\n          .${productPrefix}-inputBtn{\r\n            padding: 0.5rem;\r\n            width: 100%;\r\n            cursor: pointer;\r\n            background: transparent;\r\n            border: 2px solid #d9d9d9;\r\n            border-radius: 10px;\r\n            font-size: 18px;\r\n\r\n\r\n          }\r\n          .${productPrefix}-inputBtn:hover{\r\n            background: green;\r\n            color: white;\r\n          }\r\n\r\n          @media only screen and (max-width: 600px) {\r\n            .${productPrefix}-inputBtn{\r\n              font-size: 1rem;\r\n  \r\n            }\r\n          }\r\n\r\n          `,\r\n      },\r\n    },\r\n  });\r\n};\r\n","import { Editor } from \"grapesjs\";\r\nimport { RequiredPluginOptions } from \".\";\r\n\r\nexport default (editor: Editor, opts: RequiredPluginOptions) => {\r\n  // Remove view code panel button\r\n  editor.Panels.removeButton(\"options\", \"export-template\");\r\n\r\n  // Add new button for sending data to server\r\n  editor.Panels.addButton(\"options\", {\r\n    id: \"publishSite\",\r\n    active: true, // active by default\r\n    className: \"btn-toggle-borders\",\r\n    label: \"Publish\",\r\n    command: \"sw-visibility\",\r\n  });\r\n  const btn: any = editor.Panels.getButton(\"options\", \"publishSite\");\r\n  btn.on(\"change\", async () => {\r\n    // get html  & css from the editor\r\n    const htmlString = editor.getHtml();\r\n    const css = editor.getCss();\r\n\r\n    // Get and load current project data\r\n    const projectData = editor.getProjectData();\r\n    editor.loadProjectData(projectData);\r\n\r\n    // For removing the body tag\r\n    const html = htmlString\r\n      .replace(/<body[^>]*>/, \"\")\r\n      .replace(/<\\/body\\s*>/, \"\");\r\n\r\n    // get the Id from the location\r\n    // const url = document.location.href;\r\n    const url = \"https://chepapest.com/admin/landing_page/edit/1\";\r\n    const id = url.split(\"/\").pop();\r\n    const dataObj = {\r\n      id,\r\n      html: `${html}`,\r\n      css: `${css}`,\r\n      projectData,\r\n    };\r\n\r\n    console.log(dataObj);\r\n\r\n    const projectEndpoint = `https://chepapest.com/api/dev/user/landing-page/${id}/save`;\r\n\r\n    // Send data\r\n    async function sendData() {\r\n      const response = await fetch(projectEndpoint, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(dataObj),\r\n      });\r\n      const res = await response.json();\r\n\r\n      if (res.data === \"OK\") {\r\n        editor.Modal.open({\r\n          title: \"Your Page has been Published. Thank you\",\r\n          styles: `\r\n          .gjs-mdl-header {\r\n            height: 50rem !important;\r\n          }\r\n          `,\r\n        });\r\n      }\r\n      console.log(res);\r\n    }\r\n\r\n    sendData();\r\n  });\r\n};\r\n","import { Editor, Plugin } from \"grapesjs\";\r\nimport loadBlocks from \"./blocks\";\r\nimport loadComponents from \"./components\";\r\nimport loadPanels from \"./panels\";\r\nimport loadTraits from \"./traits\";\r\n\r\n// Plugin options\r\nexport type PluginOptions = {\r\n  /**\r\n   * Inecessary plugin options\r\n   * @default 'api'\r\n   * @default 'API'\r\n   * @default ''\r\n   * @default ''\r\n   * @default 'api'\r\n   */\r\n  id?: string[];\r\n  label?: string[];\r\n  style?: string;\r\n  block?: (blockId: string) => {};\r\n  styleAdditional?: string;\r\n  classPrefix?: string;\r\n  blocks?: string[];\r\n};\r\nexport type RequiredPluginOptions = Required<PluginOptions>;\r\n\r\nconst plugin: Plugin<PluginOptions> = (editor: Editor, opts = {}) => {\r\n  const options: RequiredPluginOptions = {\r\n    blocks: [\"productform\"],\r\n    id: [\"productform\"],\r\n    label: [\"Product Form\"],\r\n    block: () => ({}),\r\n    style: \"\",\r\n    styleAdditional: \"\",\r\n    classPrefix: \"productform\",\r\n    ...opts,\r\n  };\r\n\r\n  // Add components & blocks\r\n  loadComponents(editor, options);\r\n  loadBlocks(editor, options);\r\n  loadTraits(editor);\r\n  loadPanels(editor, options);\r\n};\r\n\r\nexport default plugin;\r\n","import { BlockProperties, Editor } from \"grapesjs\";\r\nimport { RequiredPluginOptions } from \".\";\r\nimport {\r\n  typeButton,\r\n  typeDiv,\r\n  typeForm,\r\n  typeHiddenDiv,\r\n  typeInput,\r\n  typeLabel,\r\n  typeText,\r\n} from \"./components\";\r\n\r\nexport default async (editor: Editor, opts: RequiredPluginOptions) => {\r\n  const { block, label, id } = opts;\r\n\r\n  // Funciton for adding custom blocks\r\n  const addBlock = (id: string, def: BlockProperties) => {\r\n    opts.blocks?.indexOf(id)! >= 0 &&\r\n      editor.Blocks.add(id, {\r\n        select: true,\r\n        ...def,\r\n        ...opts.block(id),\r\n      });\r\n  };\r\n\r\n  if (block) {\r\n    const url = \"https://chepapest.com/api/dev/products\";\r\n    let productData = null;\r\n    try {\r\n      // API request when the block is added\r\n      const response = await fetch(url);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to fetch data\");\r\n      }\r\n\r\n      // storing the response in variable\r\n      const data = await response.json();\r\n      productData = data.data;\r\n\r\n      // Adding the Form block to the UI sidebar\r\n      addBlock(id[0], {\r\n        media: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M22 5.5c0-.3-.5-.5-1.3-.5H3.4c-.8 0-1.3.2-1.3.5v3c0 .3.5.5 1.3.5h17.4c.8 0 1.3-.2 1.3-.5v-3zM21 8H3V6h18v2zM22 10.5c0-.3-.5-.5-1.3-.5H3.4c-.8 0-1.3.2-1.3.5v3c0 .3.5.5 1.3.5h17.4c.8 0 1.3-.2 1.3-.5v-3zM21 13H3v-2h18v2z\"/><rect width=\"10\" height=\"3\" x=\"2\" y=\"15\" rx=\".5\"/></svg>`,\r\n        label: label[0],\r\n        category: \"Extra\",\r\n        content: {\r\n          type: typeForm,\r\n          data: productData,\r\n          data1: 1,\r\n          components: [\r\n            {\r\n              type: typeDiv,\r\n              components: [{ type: typeText, components: \"Order Form\" }],\r\n            },\r\n            {\r\n              components: [\r\n                {\r\n                  type: typeDiv,\r\n                  components: [\r\n                    { type: typeLabel, components: \"Your Name:\" },\r\n                    {\r\n                      type: typeInput,\r\n                      attributes: {\r\n                        type: \"text\",\r\n                        placeholder: \"Enter your Name\",\r\n                        name: \"userName\",\r\n                      },\r\n                    },\r\n                  ],\r\n                },\r\n              ],\r\n            },\r\n            {\r\n              components: [\r\n                {\r\n                  type: typeDiv,\r\n                  components: [\r\n                    { type: typeLabel, components: \"Phone Number:\" },\r\n                    {\r\n                      type: typeInput,\r\n                      attributes: {\r\n                        type: \"text\",\r\n                        placeholder: \"Enter your Number\",\r\n                        name: \"number\",\r\n                      },\r\n                    },\r\n                  ],\r\n                },\r\n              ],\r\n            },\r\n            {\r\n              components: [\r\n                {\r\n                  type: typeDiv,\r\n                  components: [\r\n                    { type: typeLabel, components: \"Address:\" },\r\n                    {\r\n                      type: typeInput,\r\n                      attributes: {\r\n                        type: \"text\",\r\n                        placeholder: \"Enter your Address\",\r\n                        name: \"address\",\r\n                      },\r\n                    },\r\n                  ],\r\n                },\r\n              ],\r\n            },\r\n            {\r\n              type: typeHiddenDiv,\r\n              components: [\r\n                {\r\n                  type: typeHiddenDiv,\r\n                  components: [\r\n                    {\r\n                      type: typeInput,\r\n                      attributes: {\r\n                        type: \"hidden\",\r\n                        id: \"server\",\r\n                        name: \"landingpage\",\r\n                        value: \"true\",\r\n                      },\r\n                    },\r\n                    {\r\n                      type: typeInput,\r\n                      attributes: {\r\n                        type: \"hidden\",\r\n                        id: \"token\",\r\n                        name: \"_token\",\r\n                        value: \"{{ csrf_token() }}\",\r\n                      },\r\n                    },\r\n\r\n                    {\r\n                      type: typeInput,\r\n                      attributes: { type: \"hidden\", id: \"productId\" },\r\n                      name: \"productId\",\r\n                    },\r\n                    {\r\n                      type: typeInput,\r\n                      attributes: { type: \"hidden\", id: \"productPrice\" },\r\n                      name: \"productPrice\",\r\n                    },\r\n                    {\r\n                      type: typeInput,\r\n                      attributes: { type: \"hidden\", id: \"productQuantity\" },\r\n                      name: \"productQuantity\",\r\n                    },\r\n                  ],\r\n                },\r\n              ],\r\n            },\r\n            {\r\n              components: [{ type: typeButton, components: \"Submit\" }],\r\n            },\r\n            // Add Hidden components\r\n          ],\r\n        },\r\n        ...block,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error in Fetching Data\", error);\r\n    }\r\n  }\r\n\r\n  editor.BlockManager.add(\"link-block\", {\r\n    label: \"Link Block\",\r\n    category: \"Basic\",\r\n    media: `<svg viewBox=\"0 0 24 24\">\r\n      <path fill=\"currentColor\" d=\"M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z\"></path>\r\n    </svg>`,\r\n    content: {\r\n      type: \"link\",\r\n      editable: false,\r\n      droppable: true,\r\n      style: {\r\n        display: \"inline-block\",\r\n        padding: \"5px\",\r\n        \"min-height\": \"50px\",\r\n        \"min-width\": \"50px\",\r\n      },\r\n    },\r\n  });\r\n\r\n  editor.BlockManager.add(\"quote\", {\r\n    label: \"Quote\",\r\n    media: `<svg viewBox=\"0 0 24 24\">\r\n        <path fill=\"currentColor\" d=\"M14,17H17L19,13V7H13V13H16M6,17H9L11,13V7H5V13H8L6,17Z\" />\r\n    </svg>`,\r\n    content: `<blockquote class=\"quote\">\r\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore ipsum dolor sit\r\n      </blockquote>`,\r\n  });\r\n\r\n  editor.BlockManager.add(\"text-basic\", {\r\n    label: \"Text section\",\r\n    media: `<svg viewBox=\"0 0 24 24\">\r\n        <path fill=\"currentColor\" d=\"M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z\" />\r\n    </svg>`,\r\n    content: `<section class=\"bdg-sect\">\r\n      <h1 class=\"heading\">Insert title here</h1>\r\n      <p class=\"paragraph\">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>\r\n      </section>`,\r\n  });\r\n\r\n  editor.BlockManager.add(\"h1-block\", {\r\n    label: \"Heading\",\r\n    content: \"<h1>Put your title here</h1>\",\r\n    category: \"Basic\",\r\n    attributes: {\r\n      title: \"Insert h1 block\",\r\n    },\r\n  });\r\n\r\n  editor.BlockManager.add(\"text\", {\r\n    label: \"Text\",\r\n    media: `<svg viewBox=\"0 0 24 24\">\r\n      <path fill=\"currentColor\" d=\"M18.5,4L19.66,8.35L18.7,8.61C18.25,7.74 17.79,6.87 17.26,6.43C16.73,6 16.11,6 15.5,6H13V16.5C13,17 13,17.5 13.33,17.75C13.67,18 14.33,18 15,18V19H9V18C9.67,18 10.33,18 10.67,17.75C11,17.5 11,17 11,16.5V6H8.5C7.89,6 7.27,6 6.74,6.43C6.21,6.87 5.75,7.74 5.3,8.61L4.34,8.35L5.5,4H18.5Z\" />\r\n    </svg>`,\r\n    activate: true,\r\n    content: {\r\n      type: \"text\",\r\n      content: \"Insert your text here\",\r\n      style: { padding: \"10px\" },\r\n    },\r\n  });\r\n\r\n  // Added Text Section\r\n  editor.BlockManager.add(\"text-sect\", {\r\n    label: \"Text Section\",\r\n    media: `<svg viewBox=\"0 0 24 24\">\r\n        <path fill=\"currentColor\" d=\"M20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20M4,6V18H20V6H4M6,9H18V11H6V9M6,13H16V15H6V13Z\" />\r\n    </svg>`,\r\n    content: `\r\n      <h1 class=\"heading\">Insert title here</h1>\r\n      <p class=\"paragraph\">\r\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua\r\n      </p>\r\n    `,\r\n  });\r\n\r\n  // Works\r\n  editor.BlockManager.add(\"image\", {\r\n    label: \"Image\",\r\n    media: `<svg viewBox=\"0 0 24 24\">\r\n      <path fill=\"currentColor\" d=\"M21,3H3C2,3 1,4 1,5V19A2,2 0 0,0 3,21H21C22,21 23,20 23,19V5C23,4 22,3 21,3M5,17L8.5,12.5L11,15.5L14.5,11L19,17H5Z\" />\r\n    </svg>`,\r\n    activate: true,\r\n    content: {\r\n      type: \"image\",\r\n      style: { color: \"black\" },\r\n    },\r\n  });\r\n\r\n  editor.BlockManager.add(\"sect100\", {\r\n    label: \"1 Section\",\r\n    media: `<svg viewBox=\"0 0 24 24\">\r\n      <path fill=\"currentColor\" d=\"M2 20h20V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h20a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1Z\"/>\r\n    </svg>`,\r\n    content: `\r\n      <table class=\"custom-table\">\r\n        <tr>\r\n          <td></td>\r\n        </tr>\r\n      </table>\r\n    `,\r\n  });\r\n\r\n  editor.BlockManager.add(\"sect50\", {\r\n    label: \"1/2 Section\",\r\n    media: `<svg viewBox=\"0 0 23 24\">\r\n      <path fill=\"currentColor\" d=\"M2 20h8V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1ZM13 20h8V4h-8v16Zm-1 0V4a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-8a1 1 0 0 1-1-1Z\"/>\r\n    </svg>`,\r\n    content: `\r\n      <table>\r\n        <tr>\r\n          <td ></td>\r\n          <td ></td>\r\n        </tr>\r\n      </table>\r\n    `,\r\n  });\r\n\r\n  editor.BlockManager.add(\"sect30\", {\r\n    label: \"1/3 Section\",\r\n    media: `<svg viewBox=\"0 0 23 24\">\r\n      <path fill=\"currentColor\" d=\"M2 20h4V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1ZM17 20h4V4h-4v16Zm-1 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1ZM9.5 20h4V4h-4v16Zm-1 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1Z\"/>\r\n    </svg>`,\r\n    content: `\r\n      <table>\r\n        <tr>\r\n          <td></td>\r\n          <td ></td>\r\n          <td></td>\r\n        </tr>\r\n      </table>\r\n    `,\r\n  });\r\n\r\n  editor.BlockManager.add(\"sect37\", {\r\n    label: \"3/7 Section\",\r\n    media: `<svg viewBox=\"0 0 24 24\">\r\n      <path fill=\"currentColor\" d=\"M2 20h5V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1ZM10 20h12V4H10v16Zm-1 0V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1Z\"></path>\r\n    </svg>`,\r\n    content: `\r\n      <table>\r\n        <tr>\r\n          <td> </td>\r\n          <td> </td>\r\n        </tr>\r\n      </table>\r\n    `,\r\n  });\r\n\r\n  editor.BlockManager.add(\"button\", {\r\n    label: \"Button\",\r\n    media: `<svg viewBox=\"0 0 24 24\">\r\n        <path fill=\"currentColor\" d=\"M20 20.5C20 21.3 19.3 22 18.5 22H13C12.6 22 12.3 21.9 12 21.6L8 17.4L8.7 16.6C8.9 16.4 9.2 16.3 9.5 16.3H9.7L12 18V9C12 8.4 12.4 8 13 8S14 8.4 14 9V13.5L15.2 13.6L19.1 15.8C19.6 16 20 16.6 20 17.1V20.5M20 2H4C2.9 2 2 2.9 2 4V12C2 13.1 2.9 14 4 14H8V12H4V4H20V12H18V14H20C21.1 14 22 13.1 22 12V4C22 2.9 21.1 2 20 2Z\" />\r\n    </svg>`,\r\n    content: '<a class=\"button\">Button</a>',\r\n  });\r\n\r\n  editor.BlockManager.add(\"divider\", {\r\n    label: \"Divider\",\r\n    media: `<svg viewBox=\"0 0 24 24\">\r\n        <path fill=\"currentColor\" d=\"M21 18H2V20H21V18M19 10V14H4V10H19M20 8H3C2.45 8 2 8.45 2 9V15C2 15.55 2.45 16 3 16H20C20.55 16 21 15.55 21 15V9C21 8.45 20.55 8 20 8M21 4H2V6H21V4Z\" />\r\n    </svg>`,\r\n    content: `\r\n      <table style=\"width: 100%; margin-top: 10px; margin-bottom: 10px;\">\r\n        <tr>\r\n          <td ></td>\r\n        </tr>\r\n      </table>\r\n      <style>\r\n        .divider {\r\n          background-color: red;\r\n          height: 1px;\r\n        }\r\n      </style>\r\n    `,\r\n  });\r\n\r\n  const gridItem = `<table class=\"grid-item-card\">\r\n    <tr>\r\n      <td class=\"grid-item-card-cell\">\r\n        <img class=\"grid-item-image\" src=\"https://via.placeholder.com/250x150/78c5d6/fff/\" alt=\"Image\"/>\r\n        <table class=\"grid-item-card-body\">\r\n          <tr>\r\n            <td class=\"grid-item-card-content\">\r\n              <h1 class=\"card-title\">Title here</h1>\r\n              <p class=\"card-text\">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt</p>\r\n            </td>\r\n          </tr>\r\n        </table>\r\n      </td>\r\n    </tr>\r\n  </table>`;\r\n\r\n  editor.BlockManager.add(\"grid-items\", {\r\n    label: \"Grid Items\",\r\n    media: `<svg viewBox=\"0 0 24 24\">\r\n    <path fill=\"currentColor\" d=\"M3,11H11V3H3M3,21H11V13H3M13,21H21V13H13M13,3V11H21V3\"/>\r\n  </svg>`,\r\n    content: `\r\n    <table class=\"grid-item-row\">\r\n      <tr>\r\n        <td class=\"grid-item-cell2-l\">${gridItem}</td>\r\n        <td class=\"grid-item-cell2-r\">${gridItem}</td>\r\n      </tr>\r\n    </table>\r\n  `,\r\n  });\r\n\r\n  const listItem = `<table class=\"list-item\">\r\n    <tr>\r\n      <td class=\"list-item-cell\">\r\n        <table class=\"list-item-content\">\r\n          <tr class=\"list-item-row\">\r\n            <td class=\"list-cell-left\">\r\n              <img class=\"list-item-image\" src=\"https://via.placeholder.com/150/78c5d6/fff\" alt=\"Image\"/>\r\n            </td>\r\n            <td class=\"list-cell-right\">\r\n              <h1 class=\"card-title\">Title here</h1>\r\n              <p class=\"card-text\">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt</p>\r\n            </td>\r\n          </tr>\r\n        </table>\r\n      </td>\r\n    </tr>\r\n  </table>`;\r\n\r\n  editor.BlockManager.add(\"list-items\", {\r\n    label: \"List Items\",\r\n    media: `<svg viewBox=\"0 0 24 24\">\r\n    <path fill=\"currentColor\" d=\"M2 14H8V20H2M16 8H10V10H16M2 10H8V4H2M10 4V6H22V4M10 20H16V18H10M10 16H22V14H10\"/>\r\n  </svg>`,\r\n    content: listItem + listItem,\r\n  });\r\n};\r\n","import { Editor } from \"grapesjs\";\r\n\r\nexport default async (editor: Editor) => {\r\n  const url = \"https://chepapest.com/api/dev/products\";\r\n  let productData: any = null;\r\n  try {\r\n    // API request when the block is added\r\n    const response = await fetch(url);\r\n\r\n    if (!response.ok) {\r\n      throw new Error(\"Failed to fetch data\");\r\n    }\r\n\r\n    // storing the response in variable\r\n    const data = await response.json();\r\n    productData = data.data;\r\n\r\n    editor.TraitManager.addType(\"select\", {\r\n      events: {\r\n        keyup: \"click\",\r\n      },\r\n\r\n      // Initializing the traits with HTML select elem\r\n      createInput({ trait }): any {\r\n        const traitOpts = trait.get(\"options\") || [];\r\n\r\n        const options = traitOpts.length ? traitOpts : productData;\r\n\r\n        const el = document.createElement(\"div\");\r\n        el.innerHTML = `\r\n          <select class=\"products\">\r\n          <option value=\"\" disabled selected>Select a Product</option>\r\n            ${options\r\n              .map(\r\n                (opt: any) => `<option value=\"${opt.id}\">${opt.title}</option>`\r\n              )\r\n              .join(\"\")}\r\n          </select>\r\n        `;\r\n\r\n        // Disabling the first Element\r\n        const inputType: any = el.querySelector(\".products\");\r\n        inputType.addEventListener(\"click\", (e: any) => {\r\n          let firstOpt: any = el.querySelector(\"option:first-child\");\r\n          if (e.target === firstOpt && !firstOpt.dataset.clicked) {\r\n            firstOpt.dataset.clicked = true;\r\n            firstOpt.style.display = \"none\";\r\n            firstOpt.disabled = true;\r\n          }\r\n        });\r\n\r\n        return el;\r\n      },\r\n\r\n      // Fires while clicking on the gear icon\r\n      onEvent({ elInput, component }) {\r\n        const remoteData = component.attributes.data;\r\n\r\n        const productId: any = elInput.querySelector(\".products\");\r\n        let selectedData;\r\n\r\n        // Match the selected data object from the data got from the server\r\n        for (let i = 0; i < remoteData.length; i++) {\r\n          if (remoteData[i].id == productId.value) {\r\n            selectedData = remoteData[i];\r\n          }\r\n        }\r\n        component.addAttributes({ selectedData: selectedData });\r\n        component.attributes.selectedData = selectedData;\r\n      },\r\n    });\r\n  } catch (error) {\r\n    console.log(\"Error in Fetching Data\", error);\r\n  }\r\n\r\n  // editor.TraitManager.addType(\"link\", {\r\n  //   onEvent({ elInput, component }) {\r\n  //     console.log(\"clicked\");\r\n  //   },\r\n  // });\r\n};\r\n"],"names":["root","factory","exports","module","define","amd","globalThis","window","this","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","typeForm","typeInput","typeButton","typeLabel","typeText","typeDiv","typeHiddenDiv","editor","opts","Panels","removeButton","addButton","id","active","className","label","command","getButton","on","htmlString","getHtml","css","getCss","projectData","getProjectData","loadProjectData","html","replace","split","pop","dataObj","console","log","projectEndpoint","fetch","method","headers","body","JSON","stringify","json","res","data","Modal","open","title","styles","sendData","options","blocks","block","style","styleAdditional","classPrefix","productData","Components","productPrefix","idContainer","addType","view","onRender","model","attributes","selectedData","getById","el","document","head","querySelector","events","submit","e","preventDefault","defaults","tagName","droppable","draggable","name","class","action","traits","type","components","init","getAttributes","idElem","priceElem","quantityElem","innerHTML","price","isComponent","highlightable","extendFnView","updateAttributes","setAttribute","extend","text","addBlock","def","indexOf","Blocks","add","select","url","response","ok","Error","media","category","content","data1","placeholder","error","BlockManager","editable","display","padding","activate","color","gridItem","listItem","TraitManager","keyup","createInput","traitOpts","length","createElement","map","opt","join","addEventListener","firstOpt","target","dataset","clicked","disabled","onEvent","elInput","component","remoteData","productId","i","addAttributes"],"sourceRoot":""}