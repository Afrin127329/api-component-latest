/*! api-component - 1.0.1 */
!function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports["api-component"]=t():e["api-component"]=t()}('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:this,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})}},t={};e.r(t),e.d(t,{default:()=>v});var n="form",o="input",r="button",a="label",i="text",c="div",s="hiddenDiv";var l=void 0&&(void 0).__assign||function(){return l=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},l.apply(this,arguments)},u=void 0&&(void 0).__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{s(o.next(e))}catch(e){a(e)}}function c(e){try{s(o["throw"](e))}catch(e){a(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((o=o.apply(e,t||[])).next())}))},d=void 0&&(void 0).__generator||function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,o&&(r=2&c[0]?o["return"]:c[0]?o["throw"]||((r=o["return"])&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(6===c[0]&&i.label<r[1]){i.label=r[1],r=c;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(c);break}r[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],o=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};var p=void 0&&(void 0).__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{s(o.next(e))}catch(e){a(e)}}function c(e){try{s(o["throw"](e))}catch(e){a(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((o=o.apply(e,t||[])).next())}))},f=void 0&&(void 0).__generator||function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,o&&(r=2&c[0]?o["return"]:c[0]?o["throw"]||((r=o["return"])&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(6===c[0]&&i.label<r[1]){i.label=r[1],r=c;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(c);break}r[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],o=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};const m=function(e,t){e.Panels.removeButton("options","export-template"),e.Panels.addButton("options",{id:"publishSite",active:!0,className:"btn-toggle-borders",label:"Publish",command:"sw-visibility"}),e.Panels.getButton("options","publishSite").on("change",(function(){return p(void 0,void 0,void 0,(function(){var t,n,o,r,a,i;return f(this,(function(c){return t=e.getHtml(),n=e.getCss(),o=document.location.href,r=o.split("/").pop(),a={id:r,html:"".concat(t),css:"".concat(n)},console.log(a),e.setComponents(a.html),e.setStyle(a.css),i="https://chepapest.com/api/dev/user/landing-page/".concat(r,"/save"),function(){p(this,void 0,void 0,(function(){var t;return f(this,(function(n){switch(n.label){case 0:return[4,fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})];case 1:return[4,n.sent().json()];case 2:return"OK"===(t=n.sent()).data&&e.Modal.open({title:"Your Page has been Published. Thank you",styles:"\n          .gjs-mdl-header {\n            height: 50rem !important;\n          }\n          "}),console.log(t),[2]}}))}))}(),[2]}))}))}))};var h=void 0&&(void 0).__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{s(o.next(e))}catch(e){a(e)}}function c(e){try{s(o["throw"](e))}catch(e){a(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((o=o.apply(e,t||[])).next())}))},y=void 0&&(void 0).__generator||function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,o&&(r=2&c[0]?o["return"]:c[0]?o["throw"]||((r=o["return"])&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(6===c[0]&&i.label<r[1]){i.label=r[1],r=c;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(c);break}r[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],o=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};var b=void 0&&(void 0).__assign||function(){return b=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},b.apply(this,arguments)};const v=function(e,t){void 0===t&&(t={});var p=document.querySelector('[name="_token"]');p=document.head.querySelector('meta[name="csrf-token"]');var f=b({blocks:["productform"],id:["productform"],label:["Product Form"],block:function(){return{}},style:"",styleAdditional:"",classPrefix:"productform",token:p},t);!function(e,t){var l,u=e.Components,d=(e.TraitManager,t.label),p=t.classPrefix,f="".concat(n,"-container");u.addType(n,{view:{onRender:function(){l=this.model.attributes.selectedData},events:{submit:function(e){return e.preventDefault()}}},model:{defaults:{tagName:"form",droppable:":not(form)",draggable:":not(form)",name:d,attributes:{class:"".concat(p," ").concat(p,"-container"),method:"post",action:"https://chepapest.com/checkout"},traits:[{type:"select",name:"product"}],components:{type:f,data:l},styles:"\n          .".concat(p," {\n            max-width: 50rem;\n            padding: 20px;\n            border-radius: 10px;\n            box-shadow: rgb(223 223 223) 0px 6px 20px 7px;\n            margin: 1rem;\n            outline: none !important;\n            border: 2px solid #d9d9d9;\n\n          }\n\n          .").concat(p,"-container {\n            width: 100%;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            gap: 2rem;\n            margin-bottom: 2rem;\n            padding: 3rem;\n          }\n\n          @media only screen and (max-width: 600px) {\n            .").concat(p,"{\n              width: 90%;\n  \n            }\n          }\n        ")},init:function(){var e=this;this.on("change:attributes:selectedData",(function(){var t=e.getAttributes().selectedData,n=u.getById("productId").view,o=u.getById("productPrice").view,r=u.getById("productQuantity").view;n.el.innerHTML=t.id,o.el.innerHTML=t.price,r.el.innerHTML=1}))}}}),u.addType(i,{isComponent:function(e){return"P"==e.tagName},model:{defaults:{tagName:"p",droppable:!1,highlightable:!1,attributes:{class:"".concat(p,"-idTitle")},styles:t.style||"\n          .".concat(p,"-idTitle {\n            font-size: 2.5rem;\n            font-weight: 900;\n            margin-bottom: 0rem;\n            text-align: center;\n            width: 100%;\n          } \n          ")}}}),u.addType(a,{isComponent:function(e){return"LABEL"==e.tagName},model:{defaults:{tagName:"label",droppable:!1,highlightable:!1,attributes:{class:"".concat(p,"-idLabel")},styles:t.style||"\n          .".concat(p,"-idLabel {\n            \n          } \n          ")}}}),u.addType(c,{isComponent:function(e){return"DIV"==e.tagName},model:{defaults:{tagName:"div",droppable:!1,highlightable:!1,attributes:{class:"".concat(p,"-inputDiv")},styles:t.style||"\n          .".concat(p,"-inputDiv {\n            display: flex;\n            gap: 2 rem;\n            gap: 2rem;\n            justify-content: space-between;\n            font-size: 1.4rem;\n            align-items: center;\n            width: 23rem;\n          }\n\n          \n          \n          @media only screen and (max-width: 600px) {\n            .").concat(p,"-inputDiv{\n              width: 100%;\n              font-size: 1rem;\n              flex-direction: column;\n              gap: 0.5rem;\n  \n            }\n          }\n          ")}}}),u.addType(s,{isComponent:function(e){return"DIV"==e.tagName},model:{defaults:{tagName:"div",droppable:!1,highlightable:!1,attributes:{class:"".concat(p,"-hiddenInput")},styles:t.style||"\n          .".concat(p,"-hiddenInput {\n            display: none;\n          }\n          ")}}}),u.addType(o,{isComponent:function(e){return"INPUT"==e.tagName},model:{defaults:{tagName:"input",droppable:!1,highlightable:!1,attributes:{type:"text",class:"".concat(p,"-inputField")},traits:[{name:"name"},{name:"placeholder"},{type:"select",name:"type",options:[{value:"text"}]},{type:"checkbox",name:"required"}],styles:t.style||"\n          .".concat(p,"-inputField {\n            border: 2px solid #10101033;\n            padding: 0.5rem;\n            outline: none;\n            border-radius: 10px;\n          } \n          ")}},extendFnView:["updateAttributes"],view:{updateAttributes:function(){this.el.setAttribute("autocomplete","off")}}}),u.addType(r,{extend:o,isComponent:function(e){return"BUTTON"==e.tagName},model:{defaults:{tagName:"button",attributes:{type:"submit",value:"submit",class:"".concat(p,"-inputBtn")},text:"Submit Now",styles:t.style||"\n          .".concat(p,"-inputBtn{\n            padding: 0.5rem;\n            width: 100%;\n            cursor: pointer;\n            background: transparent;\n            border: 2px solid #d9d9d9;\n            border-radius: 10px;\n            font-size: 18px;\n\n\n          }\n          .").concat(p,"-inputBtn:hover{\n            background: green;\n            color: white;\n          }\n\n          @media only screen and (max-width: 600px) {\n            .").concat(p,"-inputBtn{\n              font-size: 1rem;\n  \n            }\n          }\n\n          ")}}})}(e,f),function(e,t){u(void 0,void 0,void 0,(function(){var u,p,f,m,h,y,b,v,g,w,x;return d(this,(function(d){switch(d.label){case 0:if(u=t.block,p=t.label,f=t.id,m=t,h=e.BlockManager,y=function(e,n){var o;(null===(o=m.blocks)||void 0===o?void 0:o.indexOf(e))>=0&&h.add(e,l(l(l({},n),{category:"Extra",select:!0}),t.block(e)))},!u)return[3,5];b="https://chepapest.com/api/dev/products",v=null,d.label=1;case 1:return d.trys.push([1,4,,5]),[4,fetch(b)];case 2:if(!(g=d.sent()).ok)throw new Error("Failed to fetch data");return[4,g.json()];case 3:return w=d.sent(),v=w.data,y(f[0],l({media:"<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M22 5.5c0-.3-.5-.5-1.3-.5H3.4c-.8 0-1.3.2-1.3.5v3c0 .3.5.5 1.3.5h17.4c.8 0 1.3-.2 1.3-.5v-3zM21 8H3V6h18v2zM22 10.5c0-.3-.5-.5-1.3-.5H3.4c-.8 0-1.3.2-1.3.5v3c0 .3.5.5 1.3.5h17.4c.8 0 1.3-.2 1.3-.5v-3zM21 13H3v-2h18v2z\"/><rect width=\"10\" height=\"3\" x=\"2\" y=\"15\" rx=\".5\"/></svg>",label:p[0],content:{type:n,data:v,data1:1,components:[{type:c,components:[{type:i,components:"Order Form"}]},{components:[{type:c,components:[{type:a,components:"Your Name:"},{type:o,attributes:{type:"text",placeholder:"Enter your Name",name:"userName"}}]}]},{components:[{type:c,components:[{type:a,components:"Phone Number:"},{type:o,attributes:{type:"text",placeholder:"Enter your Number",name:"number"}}]}]},{components:[{type:c,components:[{type:a,components:"Address:"},{type:o,attributes:{type:"text",placeholder:"Enter your Address",name:"address"}}]}]},{type:s,components:[{type:s,components:[{type:o,attributes:{type:"hidden",id:"server",name:"landingpage",value:"true"}},{type:o,attributes:{type:"hidden",id:"server",name:"_token",value:"{{ csrf_token() }}"}},{type:o,attributes:{type:"hidden",id:"productId"},name:"productId"},{type:o,attributes:{type:"hidden",id:"productPrice"},name:"productPrice"},{type:o,attributes:{type:"hidden",id:"productQuantity"},name:"productQuantity"}]}]},{components:[{type:r,components:"Submit"}]}]}},u)),[3,5];case 4:return x=d.sent(),console.error("Error in Fetching Data",x),[3,5];case 5:return[2]}}))}))}(e,f),function(e){h(void 0,void 0,void 0,(function(){var t,n,o,r,a;return y(this,(function(i){switch(i.label){case 0:t="https://chepapest.com/api/dev/products",n=null,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(t)];case 2:if(!(o=i.sent()).ok)throw new Error("Failed to fetch data");return[4,o.json()];case 3:return r=i.sent(),n=r.data,e.TraitManager.addType("select",{events:{keyup:"click"},createInput:function(e){var t=e.trait.get("options")||[],o=t.length?t:n,r=document.createElement("div");return r.innerHTML="\n          <select class=\"products\">\n          <option value=\"\" disabled selected>Select a Product</option>\n            ".concat(o.map((function(e){return"<option value=\"".concat(e.id,"\">").concat(e.title,"</option>")})).join(""),"\n          </select>\n        "),r.querySelector(".products").addEventListener("click",(function(e){var t=r.querySelector("option:first-child");e.target!==t||t.dataset.clicked||(t.dataset.clicked=!0,t.style.display="none",t.disabled=!0)})),r},onEvent:function(e){for(var t,n=e.elInput,o=e.component,r=o.attributes.data,a=n.querySelector(".products"),i=0;i<r.length;i++)r[i].id==a.value&&(t=r[i]);o.addAttributes({selectedData:t}),o.attributes.selectedData=t}}),[3,5];case 4:return a=i.sent(),console.log("Error in Fetching Data",a),[3,5];case 5:return[2]}}))}))}(e),m(e)};return t})()));
//# sourceMappingURL=index.js.map